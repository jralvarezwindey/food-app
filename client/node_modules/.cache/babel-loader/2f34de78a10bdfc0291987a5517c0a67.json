{"ast":null,"code":"import { GET_DIETS, GET_RECIPES, FILTER_RECIPES, SORT_RECIPES, SET_PAGE, SET_STATUS } from './actions.js';\nconst initialState = {\n  diets: [],\n  recipes: {\n    fetched: [],\n    displayed: []\n  },\n  recipesDisplayParameters: {\n    status: 'initial',\n    page: 0,\n    filters: [],\n    sortCriteria: 'none'\n  }\n};\nexport default function reducer() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let {\n    type,\n    payload\n  } = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (type) {\n    case GET_DIETS:\n      return { ...state,\n        diets: payload\n      };\n\n    case GET_RECIPES:\n      return { ...state,\n        recipes: {\n          fetched: payload,\n          displayed: payload\n        },\n        recipesDisplayParameters: {\n          status: payload.length > 0 ? 'displaying' : 'not found',\n          page: 0,\n          filters: []\n        }\n      };\n\n    case FILTER_RECIPES:\n      const [newFilters, filteredRecipes] = filterRecipes([...state.recipes.fetched], [...state.recipesDisplayParameters.filters], payload);\n      return { ...state,\n        recipes: { ...state.recipes,\n          displayed: filteredRecipes\n        },\n        recipesDisplayParameters: { ...state.recipesDisplayParameters,\n          filters: newFilters,\n          page: 0\n        }\n      };\n\n    case SORT_RECIPES:\n      const removeSortCriteria = payload === state.recipesDisplayParameters.sortCriteria;\n      return { ...state,\n        recipes: { ...state.recipes,\n          displayed: removeSortCriteria ? state.recipes.fetched : sortRecipes([...state.recipes.displayed], payload)\n        },\n        recipesDisplayParameters: { ...state.recipesDisplayParameters,\n          page: 0,\n          sortCriteria: removeSortCriteria ? 'none' : payload\n        }\n      };\n\n    case SET_PAGE:\n      return { ...state,\n        recipesDisplayParameters: { ...state.recipesDisplayParameters,\n          page: payload\n        }\n      };\n\n    case SET_STATUS:\n      return { ...state,\n        recipesDisplayParameters: { ...state.recipesDisplayParameters,\n          status: payload\n        }\n      };\n\n    default:\n      return { ...state\n      };\n  }\n}\n;\n\nfunction filterRecipes(recipes, filters, filter) {\n  filters.includes(filter) ? filters.splice(filters.indexOf(filter), 1) : filters.push(filter);\n  return [filters, recipes.filter(recipe => {\n    return filters.every(filter => recipe.diets.includes(filter));\n  })];\n}\n\nfunction sortRecipes(recipes, sortCriteria) {\n  switch (sortCriteria) {\n    case 'az':\n      return recipes.sort((x, y) => x.title.localeCompare(y.title));\n\n    case 'za':\n      return recipes.sort((x, y) => y.title.localeCompare(x.title));\n\n    case 'score':\n      return recipes.sort((x, y) => y.score - x.score);\n\n    default:\n      return recipes;\n  }\n}\n\n;","map":{"version":3,"sources":["/home/jralvarezwindey/Escritorio/food-app/client/src/redux/reducer.js"],"names":["GET_DIETS","GET_RECIPES","FILTER_RECIPES","SORT_RECIPES","SET_PAGE","SET_STATUS","initialState","diets","recipes","fetched","displayed","recipesDisplayParameters","status","page","filters","sortCriteria","reducer","state","type","payload","length","newFilters","filteredRecipes","filterRecipes","removeSortCriteria","sortRecipes","filter","includes","splice","indexOf","push","recipe","every","sort","x","y","title","localeCompare","score"],"mappings":"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","sourcesContent":["import { GET_DIETS, GET_RECIPES, FILTER_RECIPES, SORT_RECIPES, SET_PAGE, SET_STATUS } from './actions.js';\n\nconst initialState = {\n  diets: [],\n\n  recipes: {\n    fetched: [],\n    displayed: [],\n  },\n\n  recipesDisplayParameters: {\n    status: 'initial',\n    page: 0,\n    filters: [],\n    sortCriteria: 'none'\n  },\n};\n\nexport default function reducer(state = initialState, { type, payload }) {\n  switch(type) {\n    case GET_DIETS:\n      return {\n        ...state,\n        diets: payload,\n      }\n\n    case GET_RECIPES: \n      return {\n        ...state,\n        recipes: {\n          fetched: payload,\n          displayed: payload\n        },\n        recipesDisplayParameters: {\n          status: payload.length > 0 ? 'displaying' : 'not found',\n          page: 0, \n          filters: [],\n        },\n      };\n\n    case FILTER_RECIPES:\n      const [newFilters, filteredRecipes] = filterRecipes([...state.recipes.fetched], [...state.recipesDisplayParameters.filters], payload);\n      return {\n        ...state,\n        recipes: {\n          ...state.recipes,\n          displayed: filteredRecipes \n        },\n        recipesDisplayParameters: {\n          ...state.recipesDisplayParameters,\n          filters: newFilters,\n          page: 0\n        }\n      }\n\n    case SORT_RECIPES:\n      const removeSortCriteria = payload === state.recipesDisplayParameters.sortCriteria;\n      return {\n        ...state,\n        recipes: {\n          ...state.recipes,\n          displayed: removeSortCriteria ? state.recipes.fetched : sortRecipes([...state.recipes.displayed], payload),\n        },\n        recipesDisplayParameters: {\n          ...state.recipesDisplayParameters,\n          page: 0,\n          sortCriteria: removeSortCriteria ? 'none' : payload\n        }\n      }\n\n    case SET_PAGE: \n      return {\n        ...state,\n        recipesDisplayParameters: {\n          ...state.recipesDisplayParameters,\n          page: payload \n        }\n      }\n\n    case SET_STATUS:\n      return {\n        ...state,\n        recipesDisplayParameters: {\n          ...state.recipesDisplayParameters,\n          status: payload\n        }\n      }\n\n    default:\n      return {\n        ...state,\n      };\n  }\n};\n\nfunction filterRecipes(recipes, filters, filter) {\n  filters.includes(filter) \n    ? filters.splice(filters.indexOf(filter), 1) \n    : filters.push(filter)\n  return [filters, recipes.filter(recipe => {\n    return filters.every(filter => recipe.diets.includes(filter))\n  })]\n}\n\nfunction sortRecipes(recipes, sortCriteria) {\n  switch(sortCriteria) {\n    case 'az': return recipes.sort((x, y) => x.title.localeCompare(y.title));\n    case 'za': return recipes.sort((x, y) => y.title.localeCompare(x.title));\n    case 'score': return recipes.sort((x, y) => y.score - x.score);\n    default: return recipes;\n  }\n};\n\n"]},"metadata":{},"sourceType":"module"}